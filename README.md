# Cerberror
![CI](https://github.com/pbrus/cerberror/workflows/CI/badge.svg?branch=master)
[![Python](https://img.shields.io/badge/code-Python-blue.svg "Python")](https://www.python.org/)
[![Style](https://img.shields.io/badge/code%20style-Black-black.svg "Black")](https://black.readthedocs.io/en/stable/)
[![License](https://img.shields.io/badge/license-MIT-yellow.svg "MIT license")](https://github.com/pbrus/cerberror/blob/master/LICENSE)

**cerberror** was designed to customize and handle errors generated by the validator of [Cerberus](https://docs.python-cerberus.org/).

## How it works?

Let's start from checking errors generated by Cerberus:
```python
>>> v = Validator({'params': {'type': 'dict', 'schema': {'var1': {'type': 'integer'}, 'var2': {'allowed': [7, 8, 9]}}}})
>>> v.validate({'params': {'var1': 'Hello World!', 'var2': 3.14}})
>>> v.errors
{'params': [{'var1': ['must be of integer type'], 'var2': ['unallowed value 3.14']}]}
```
At least two problems occur when we want to inform a user what went wrong:
 - predetermined error messages,
 - unclear path to wrong variable.

 Let's define new messages in `msgs.txt` file:
 ```
 ('params', 'var1') 36 "{{value}} is not an integer!"
 ('params', 'var2') 68 "{{value}} not found in {{constraint}}..."
 ```
where the columns contain:
1. A path to the element defined by a tuple. Note that one-element tuple must be defined as `('some_param',)`, not `'some_param',`.
2. An error code from the [API documentation](https://docs.python-cerberus.org/en/stable/api.html#error-codes). A particular path can have many rules which implies many records in `msgs.txt` for that path.
3. A user-defined message. Optionally we can refer to attributes of a particular error using `{{attr}}` expressions. Note that a message must be defined between two `"`, not `'`.

To get new messages we use `Translator` object:
```python
>>> from cerberror import Translator

>>> tr = Translator(v, 'msgs.txt')
>>> tr.translate()
{'params -> var2': ['3.14 not found in [7, 8, 9]...'], 'params -> var1': ['Hello World! is not an integer!']}
```
As you can see we can define messages for different langauges:
```
('params', 'var1') 36 "{{value}} nie jest liczbą całkowitą!"  # PL
('params', 'var2') 68 "{{value}} nicht unter {{constraint}} gefunden..."  # DE
```
